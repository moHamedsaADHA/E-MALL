src
â”œâ”€â”€ api
â”‚   â””â”€â”€ v1
â”‚       â”œâ”€â”€ auth.routes.ts
â”‚       â”œâ”€â”€ users.routes.ts
â”‚       â”œâ”€â”€ shops.routes.ts
â”‚       â”œâ”€â”€ products.routes.ts
â”‚       â”œâ”€â”€ categories.routes.ts
â”‚       â”œâ”€â”€ cart.routes.ts
â”‚       â”œâ”€â”€ orders.routes.ts
â”‚       â”œâ”€â”€ payments.routes.ts          # NEW
â”‚       â”œâ”€â”€ reviews.routes.ts
â”‚       â”œâ”€â”€ jobs.routes.ts
â”‚       â”œâ”€â”€ applications.routes.ts
â”‚       â”œâ”€â”€ coupons.routes.ts
â”‚       â”œâ”€â”€ wishlist.routes.ts
â”‚       â”œâ”€â”€ messages.routes.ts
â”‚       â”œâ”€â”€ notifications.routes.ts
â”‚       â”œâ”€â”€ dashboards.routes.ts
â”‚       â””â”€â”€ webhooks.routes.ts           # NEW (Payments / External)
â”‚
â”œâ”€â”€ modules
â”‚   â”œâ”€â”€ auth
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”‚   â”œâ”€â”€ auth.validation.ts
â”‚   â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”‚   â””â”€â”€ auth.middleware.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ users
â”‚   â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”‚   â”œâ”€â”€ user.controller.ts
â”‚   â”‚   â”œâ”€â”€ user.service.ts
â”‚   â”‚   â”œâ”€â”€ user.validation.ts
â”‚   â”‚   â””â”€â”€ user.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ shops
â”‚   â”‚   â”œâ”€â”€ shop.model.ts
â”‚   â”‚   â”œâ”€â”€ shop.controller.ts
â”‚   â”‚   â”œâ”€â”€ shop.service.ts
â”‚   â”‚   â”œâ”€â”€ shop.validation.ts
â”‚   â”‚   â””â”€â”€ shop.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ categories
â”‚   â”‚   â”œâ”€â”€ category.model.ts            # Hierarchical (parentId)
â”‚   â”‚   â”œâ”€â”€ category.controller.ts
â”‚   â”‚   â”œâ”€â”€ category.service.ts
â”‚   â”‚   â”œâ”€â”€ category.validation.ts
â”‚   â”‚   â””â”€â”€ category.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ products
â”‚   â”‚   â”œâ”€â”€ product.model.ts             # shopId = tenant discriminator
â”‚   â”‚   â”œâ”€â”€ product.controller.ts
â”‚   â”‚   â”œâ”€â”€ product.service.ts
â”‚   â”‚   â”œâ”€â”€ product.validation.ts
â”‚   â”‚   â””â”€â”€ product.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ cart
â”‚   â”‚   â”œâ”€â”€ cart.model.ts                # Multi-vendor cart
â”‚   â”‚   â”œâ”€â”€ cart.controller.ts
â”‚   â”‚   â”œâ”€â”€ cart.service.ts
â”‚   â”‚   â””â”€â”€ cart.validation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ orders
â”‚   â”‚   â”œâ”€â”€ order.model.ts               # One order per shop
â”‚   â”‚   â”œâ”€â”€ order.controller.ts
â”‚   â”‚   â”œâ”€â”€ order.service.ts
â”‚   â”‚   â”œâ”€â”€ order.validation.ts
â”‚   â”‚   â””â”€â”€ order.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ payments                         # NEW (Separated Responsibility)
â”‚   â”‚   â”œâ”€â”€ payment.model.ts
â”‚   â”‚   â”œâ”€â”€ payment.controller.ts
â”‚   â”‚   â”œâ”€â”€ payment.service.ts
â”‚   â”‚   â”œâ”€â”€ payment.webhook.ts
â”‚   â”‚   â””â”€â”€ payment.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ reviews
â”‚   â”‚   â”œâ”€â”€ review.model.ts              # Polymorphic (Shop/Product)
â”‚   â”‚   â”œâ”€â”€ review.controller.ts
â”‚   â”‚   â”œâ”€â”€ review.service.ts
â”‚   â”‚   â””â”€â”€ review.validation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ jobs
â”‚   â”‚   â”œâ”€â”€ job.model.ts
â”‚   â”‚   â”œâ”€â”€ job.controller.ts
â”‚   â”‚   â”œâ”€â”€ job.service.ts
â”‚   â”‚   â”œâ”€â”€ job.validation.ts
â”‚   â”‚   â””â”€â”€ job.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ applications
â”‚   â”‚   â”œâ”€â”€ application.model.ts
â”‚   â”‚   â”œâ”€â”€ application.controller.ts
â”‚   â”‚   â”œâ”€â”€ application.service.ts
â”‚   â”‚   â””â”€â”€ application.validation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ coupons
â”‚   â”‚   â”œâ”€â”€ coupon.model.ts              # Global or Shop-specific
â”‚   â”‚   â”œâ”€â”€ coupon.controller.ts
â”‚   â”‚   â”œâ”€â”€ coupon.service.ts
â”‚   â”‚   â””â”€â”€ coupon.validation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ wishlist
â”‚   â”‚   â”œâ”€â”€ wishlist.model.ts
â”‚   â”‚   â”œâ”€â”€ wishlist.controller.ts
â”‚   â”‚   â””â”€â”€ wishlist.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ messages
â”‚   â”‚   â”œâ”€â”€ message.model.ts
â”‚   â”‚   â”œâ”€â”€ message.controller.ts
â”‚   â”‚   â””â”€â”€ message.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ notifications
â”‚   â”‚   â”œâ”€â”€ notification.model.ts
â”‚   â”‚   â”œâ”€â”€ notification.controller.ts
â”‚   â”‚   â””â”€â”€ notification.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ dashboards
â”‚   â”‚   â”œâ”€â”€ admin.dashboard.ts           # Aggregated analytics
â”‚   â”‚   â”œâ”€â”€ shop.dashboard.ts
â”‚   â”‚   â””â”€â”€ dashboard.service.ts
â”‚   â”‚
â”‚   â””â”€â”€ audit-logs                       # NEW (Enterprise-level)
â”‚       â”œâ”€â”€ audit.model.ts
â”‚       â””â”€â”€ audit.service.ts
â”‚
â”œâ”€â”€ middlewares
â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”œâ”€â”€ roles.middleware.ts
â”‚   â”œâ”€â”€ ownership.middleware.ts          # shopId access control
â”‚   â”œâ”€â”€ validate.middleware.ts
â”‚   â”œâ”€â”€ error.middleware.ts
â”‚   â”œâ”€â”€ upload.middleware.ts
â”‚   â””â”€â”€ rateLimit.middleware.ts
â”‚
â”œâ”€â”€ utils
â”‚   â”œâ”€â”€ AppError.ts
â”‚   â”œâ”€â”€ catchAsync.ts
â”‚   â”œâ”€â”€ apiFeatures.ts                   # filter, sort, search, paginate
â”‚   â”œâ”€â”€ pagination.ts
â”‚   â”œâ”€â”€ logger.ts
â”‚   â””â”€â”€ constants.ts
â”‚
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ database.ts
â”‚   â”œâ”€â”€ env.ts
â”‚   â”œâ”€â”€ cors.ts
â”‚   â”œâ”€â”€ swagger.ts
â”‚   â””â”€â”€ redis.ts                         # Optional caching
â”‚
â”œâ”€â”€ docs
â”‚   â”œâ”€â”€ openapi.yaml
â”‚   â””â”€â”€ erd.drawio                       # ERD source
â”‚
â”œâ”€â”€ uploads
â”‚   â”œâ”€â”€ users
â”‚   â”œâ”€â”€ shops
â”‚   â””â”€â”€ products
â”‚
â”œâ”€â”€ app.ts
â””â”€â”€ server.ts


this sorting:
1ï¸âƒ£ Auth + Roles
2ï¸âƒ£ Shops (Core of the system)
3ï¸âƒ£ Products â†’ Orders â†’ Payments
4ï¸âƒ£ Jobs + Applications
5ï¸âƒ£ Dashboards


ğŸ§­ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ Ù„Ù„Ø¨Ø¯Ø¡ (Execution Order)
ğŸ”´ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0 â€” Ù‚Ø¨Ù„ Ø£ÙŠ ÙƒÙˆØ¯ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)
ØªØ¨Ø¯Ø£ Ø¨Ù€:
config/
â”œâ”€â”€ env.ts
â”œâ”€â”€ database.ts

ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ

ØªÙˆØµÙ„ MongoDB

ØªØ¶Ø¨Ø· ENV

ØªØªØ£ÙƒØ¯ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨ÙŠØ´ØªØºÙ„

Ù…Ù„ÙØ§Øª:

server.ts

app.ts

Ø§Ù„Ù‡Ø¯Ù:
GET /health ØªØ±Ø¬Ø¹ 200 OK

ğŸŸ  Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 â€” Auth (Ø£Ù‡Ù… ÙÙˆÙ„Ø¯Ø±)
ØªØ¨Ø¯Ø£ Ø¨Ù€:
modules/auth

Ù„ÙŠÙ‡ØŸ

ÙƒÙ„ Ø­Ø§Ø¬Ø© Ø¨Ø¹Ø¯Ù‡Ø§ Ù…Ø¹ØªÙ…Ø¯Ø© Ø¹Ù„ÙŠÙ‡

Roles, JWT, Guards

Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¬ÙˆÙ‡ auth:

auth.types.ts

auth.validation.ts

auth.service.ts

auth.controller.ts

auth.routes.ts

auth.middleware.ts

âœ… APIs Ù„Ø§Ø²Ù… ØªØ®Ù„ØµÙ‡Ø§ Ù‡Ù†Ø§
Method	Endpoint	Ø§Ù„Ù‡Ø¯Ù
POST	/api/v1/auth/register	ØªØ³Ø¬ÙŠÙ„
POST	/api/v1/auth/login	Ø¯Ø®ÙˆÙ„
POST	/api/v1/auth/verify-email	ØªÙØ¹ÙŠÙ„
POST	/api/v1/auth/refresh-token	Refresh
POST	/api/v1/auth/enable-2fa	2FA
POST	/api/v1/auth/verify-2fa	ØªØ£ÙƒÙŠØ¯

Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø¯ÙŠ:

Ø¹Ù†Ø¯Ùƒ JWT Ø´ØºØ§Ù„

Roles Ù…ÙˆØ¬ÙˆØ¯Ø©

Protect middleware Ø´ØºØ§Ù„

ğŸŸ¡ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2 â€” Users (Ø£Ø³Ø§Ø³ÙŠ Ø¬Ø¯Ù‹Ø§)
ØªØ¨Ø¯Ø£ Ø¨Ù€:
modules/users

Ø§Ù„ØªØ±ØªÙŠØ¨:

user.model.ts

user.types.ts

user.service.ts

user.controller.ts

user.validation.ts

âœ… APIs
Method	Endpoint	Ù…ÙŠÙ†
GET	/api/v1/users/me	Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù…
PATCH	/api/v1/users/me	Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù…
GET	/api/v1/users	Admin
PATCH	/api/v1/users/:id/role	SuperAdmin
PATCH	/api/v1/users/:id/block	Admin
ğŸŸ¢ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 â€” Shops (Ù‚Ù„Ø¨ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ â¤ï¸)
ØªØ¨Ø¯Ø£ Ø¨Ù€:
modules/shops

Ø§Ù„ØªØ±ØªÙŠØ¨:

shop.model.ts

shop.types.ts

shop.validation.ts

shop.service.ts

shop.controller.ts

âœ… APIs
Method	Endpoint	Ù…ÙŠÙ†
POST	/api/v1/shops	ShopOwner
GET	/api/v1/shops	Public
GET	/api/v1/shops/:id	Public
PATCH	/api/v1/shops/:id	Owner
DELETE	/api/v1/shops/:id	Admin

Ø¨Ø¹Ø¯ ÙƒØ¯Ù‡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¯Ø£ ÙŠØ¨Ø§Ù† ÙØ¹Ù„ÙŠÙ‹Ø§.

ğŸ”µ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4 â€” Products & Categories
ØªØ¨Ø¯Ø£ Ø¨Ù€:
modules/categories
modules/products

APIs
Categories
POST   /api/v1/categories
GET    /api/v1/categories

Products
POST   /api/v1/products
GET    /api/v1/products
GET    /api/v1/products/:id
PATCH  /api/v1/products/:id
DELETE /api/v1/products/:id

ğŸŸ£ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5 â€” Cart & Orders
Cart APIs
POST   /api/v1/cart
GET    /api/v1/cart
PATCH  /api/v1/cart/:itemId
DELETE /api/v1/cart/:itemId

Orders APIs
POST   /api/v1/orders
GET    /api/v1/orders/me
GET    /api/v1/orders/:id
PATCH  /api/v1/orders/:id/status

ğŸŸ¤ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6 â€” Jobs & Applications
Jobs
POST /api/v1/jobs
GET  /api/v1/jobs

Applications
POST /api/v1/applications
GET  /api/v1/applications/job/:jobId
PATCH /api/v1/applications/:id/status

âš« Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7 â€” Reviews, Wishlist, Coupons

ØªØªØ¹Ù…Ù„ ÙˆØ§Ø­Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ core.

ğŸ§© Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© â€” Dashboards & Notifications

Ø¢Ø®Ø± Ø­Ø§Ø¬Ø© Ù„Ø£Ù†Ù‡Ù… Aggregations.

ğŸ Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
Ù„Ùˆ Ù‡ØªØ¨Ø¯Ø£ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø­Ø§Ù„Ù‹Ø§:

1ï¸âƒ£ config + app.ts + server.ts
2ï¸âƒ£ modules/auth
3ï¸âƒ£ modules/users
4ï¸âƒ£ modules/shops

Ù…ØªØ­Ø§ÙˆÙ„Ø´ ØªØ¹Ù…Ù„ Products Ù‚Ø¨Ù„ Shops âŒ